{"ast":null,"code":"var _jsxFileName = \"/home/guras/eclipse-workspace/Reaktywne/L9_PR/src/components/posts.jsx\";\nimport React, { Component } from \"react\";\nimport PostsTable from \"./postsTable\";\nimport Pagination from \"./common/pagination\";\nimport _ from 'lodash';\nimport { paginate } from \"../utils/paginate\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Posts extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handlePageChange = page => {\n      this.setState({\n        currentPage: page\n      });\n    };\n\n    this.handleDelete = post => {\n      const posts = this.state.items.filter(p => p.id !== post.id);\n      this.setState({\n        items: posts\n      });\n    };\n\n    this.handleSort = path => {\n      const sortColumn = { ...this.state.sortColumn\n      };\n\n      if (sortColumn.path === path) {\n        sortColumn.order = sortColumn.order === 'asc' ? 'desc' : 'asc';\n      } else {\n        sortColumn.path = path;\n        sortColumn.order = 'asc';\n      }\n\n      this.setState({\n        sortColumn\n      });\n    };\n\n    this.renderSortIcon = column => {\n      if (column !== this.state.sortColumn.path) {\n        return null;\n      }\n\n      if (this.state.sortColumn.order === 'asc') {\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-sort-asc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this);\n      }\n\n      if (this.state.sortColumn.order === 'desc') {\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-sort-desc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this);\n      }\n    };\n\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      pageSize: 4,\n      currentpage: 1,\n      sortColumn: {\n        path: 'title',\n        order: 'asc'\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"https://taw-posts.herokuapp.com/api/posts\").then(res => res.json()).then(result => {\n      this.setState({\n        isLoaded: true,\n        items: result\n      });\n      console.log(result);\n    }, error => {\n      this.setState({\n        isLoaded: true,\n        error\n      });\n    });\n  }\n\n  render() {\n    const {\n      items,\n      pageSize,\n      currentPage,\n      sortColumn\n    } = this.state;\n\n    if (!items.length) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Brak wpis\\xF3w\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this);\n    }\n\n    const sorted = _.orderBy(items, [sortColumn.path], [sortColumn.order]);\n\n    const posts = paginate(sorted, currentPage, pageSize);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(PostsTable, {\n        items: posts,\n        sortIcon: this.renderSortIcon,\n        onDelete: this.handleDelete,\n        onSort: this.handleSort\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        itemsCount: items.length,\n        pageSize: this.state.pageSize,\n        currentPage: this.state.currentPage,\n        onPageChange: this.handlePageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default Posts;","map":{"version":3,"names":["React","Component","PostsTable","Pagination","_","paginate","Posts","constructor","props","handlePageChange","page","setState","currentPage","handleDelete","post","posts","state","items","filter","p","id","handleSort","path","sortColumn","order","renderSortIcon","column","error","isLoaded","pageSize","currentpage","componentDidMount","fetch","then","res","json","result","console","log","render","length","sorted","orderBy"],"sources":["/home/guras/eclipse-workspace/Reaktywne/L9_PR/src/components/posts.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport PostsTable from \"./postsTable\";\nimport Pagination from \"./common/pagination\";\nimport _ from 'lodash';\nimport {paginate} from \"../utils/paginate\";\n\nclass Posts extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t\tisLoaded: false,\n\t\t\titems: [],\n\t\t\tpageSize: 4,\n\t\t\tcurrentpage: 1,\n\t\t\tsortColumn: { path: 'title', order: 'asc' }\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tfetch(\"https://taw-posts.herokuapp.com/api/posts\")\n\t\t\t.then(res => res.json())\n\t\t\t.then(\n\t\t\t\t(result) => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tisLoaded: true,\n\t\t\t\t\t\titems: result\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(result)\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tisLoaded: true,\n\t\t\t\t\t\terror\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t)\n\t}\n\n\thandlePageChange = (page) => {\n\t\tthis.setState({ currentPage: page });\n\t};\n\n\thandleDelete = (post) => {\n\t\tconst posts = this.state.items.filter(p => p.id !== post.id);\n\t\tthis.setState({ items: posts });\n\t};\n\n\thandleSort = (path) => {\n\t\tconst sortColumn = { ...this.state.sortColumn };\n\t\tif (sortColumn.path === path) {\n\t\t\tsortColumn.order = (sortColumn.order === 'asc') ? 'desc' : 'asc';\n\t\t} else {\n\t\t\tsortColumn.path = path;\n\t\t\tsortColumn.order = 'asc';\n\t\t}\n\t\tthis.setState({ sortColumn });\n\t};\n\n\trenderSortIcon = (column) => {\n\t\tif (column !== this.state.sortColumn.path) {\n\t\t\treturn null;\n\t\t}\n\t\tif (this.state.sortColumn.order === 'asc') {\n\t\t\treturn <i className=\"fa fa-sort-asc\"></i>\n\t\t}\n\n\t\tif (this.state.sortColumn.order === 'desc') {\n\t\t\treturn <i className=\"fa fa-sort-desc\"></i>\n\t\t}\n\t};\n\t\n\trender() {\n\t\tconst { items, pageSize, currentPage, sortColumn } = this.state;\n\t\tif (!items.length) {\n\t\t\treturn <p>Brak wpis√≥w</p>\n\t\t}\n\t\tconst sorted = _.orderBy(items, [sortColumn.path], [sortColumn.order]);\n\t\tconst posts = paginate(sorted, currentPage, pageSize);\n\n\t\treturn (<React.Fragment>\n\t\t\t<PostsTable\n\t\t\t\titems={posts}\n\t\t\t\tsortIcon={this.renderSortIcon}\n\t\t\t\tonDelete={this.handleDelete}\n\t\t\t\tonSort={this.handleSort} />\n\t\t\t<Pagination\n\t\t\t\titemsCount={items.length}\n\t\t\t\tpageSize={this.state.pageSize}\n\t\t\t\tcurrentPage={this.state.currentPage}\n\t\t\t\tonPageChange={this.handlePageChange} />\n\t\t</React.Fragment>)\n\t}\n}\n\nexport default Posts;"],"mappings":"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"},"metadata":{},"sourceType":"module"}