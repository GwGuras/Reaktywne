{"ast":null,"code":"var _jsxFileName = \"/home/guras/git/Reaktywne/L10_PR/src/components/loginForm.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LoginForm extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      account: {\n        username: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n\n    this.validate = () => {\n      const errors = {};\n      const {\n        account\n      } = this.state;\n\n      if (account.username.trim() === '') {\n        errors.username = 'Username is required!';\n      }\n\n      if (account.password.trim() === '') {\n        errors.password = 'Password is required!';\n      }\n\n      return Object.keys(errors).length === 0 ? null : errors;\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const errors = this.validate();\n      this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      axios({\n        method: 'post',\n        url: 'http://localhost:3001/api/user/auth',\n        data: {\n          login: this.state.account.username,\n          password: this.state.account.password\n        }\n      }).then(response => {\n        console.log(response);\n        localStorage.setItem('token', response.data.token);\n      }).catch(error => {\n        const errors = {};\n        errors.password = 'Given username does\\'t exists or password is wrong!';\n        this.setState({\n          errors: errors || {}\n        });\n        console.log(error);\n      });\n    };\n\n    this.handleChange = event => {\n      const account = { ...this.state.account\n      };\n      account[event.currentTarget.name] = event.currentTarget.value;\n      this.setState({\n        account\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: this.state.account.username,\n            name: \"username\",\n            onChange: this.handleChange,\n            type: \"text\",\n            className: \"form-control\",\n            id: \"username\",\n            \"aria-describedby\": \"emailHelp\",\n            placeholder: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 7\n          }, this), this.state.errors.username && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger\",\n            children: this.state.errors.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: this.state.account.password,\n            name: \"password\",\n            onChange: this.handleChange,\n            type: \"password\",\n            className: \"form-control\",\n            id: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 7\n          }, this), this.state.errors.password && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger\",\n            children: this.state.errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"names":["React","Component","axios","LoginForm","state","account","username","password","errors","validate","trim","Object","keys","length","handleSubmit","event","preventDefault","setState","method","url","data","login","then","response","console","log","localStorage","setItem","token","catch","error","handleChange","currentTarget","name","value","render"],"sources":["/home/guras/git/Reaktywne/L10_PR/src/components/loginForm.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\n\nclass LoginForm extends Component {\n\tstate = {\n\t\taccount: {\n\t\t\tusername: \"\",\n\t\t\tpassword: \"\"\n\t\t},\n\t\terrors: {}\n\t};\n\n\tvalidate = () => {\n\t\tconst errors = {};\n\n\t\tconst { account } = this.state;\n\t\tif (account.username.trim() === '') {\n\t\t\terrors.username = 'Username is required!';\n\t\t}\n\t\tif (account.password.trim() === '') {\n\t\t\terrors.password = 'Password is required!';\n\t\t}\n\n\t\treturn Object.keys(errors).length === 0 ? null : errors;\n\t};\n\n\thandleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconst errors = this.validate();\n\t\tthis.setState({ errors: errors || {} });\n\t\tif (errors) return;\n\t\taxios({\n\t\t\tmethod: 'post',\n\t\t\turl: 'http://localhost:3001/api/user/auth',\n\t\t\tdata: {\n\t\t\t\tlogin: this.state.account.username,\n\t\t\t\tpassword: this.state.account.password\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tconsole.log(response);\n\t\t\tlocalStorage.setItem('token', response.data.token);\n\t\t}).catch((error) => {\n\t\t\tconst errors = {};\n\t\t\terrors.password = 'Given username does\\'t exists or password is wrong!';\n\t\t\tthis.setState({ errors: errors || {} });\n\t\t\tconsole.log(error);\n\t\t});\n\t};\n\thandleChange = (event) => {\n\t\tconst account = { ...this.state.account };\n\t\taccount[event.currentTarget.name] = event.currentTarget.value;\n\t\tthis.setState({ account });\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h1>Login</h1>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label htmlFor=\"username\">Email address</label>\n\t\t\t\t\t\t<input value={this.state.account.username}\n\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\taria-describedby=\"emailHelp\"\n\t\t\t\t\t\t\tplaceholder=\"Username\" />\n\t\t\t\t\t\t{this.state.errors.username &&\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\">{this.state.errors.username}</div>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t\t\t<input value={this.state.account.password}\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"Password\" />\n\t\t\t\t\t\t{this.state.errors.password &&\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\">{this.state.errors.password}</div>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">Login</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}